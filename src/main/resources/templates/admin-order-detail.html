<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Order Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/admin.css}">
  <link rel="stylesheet" th:href="@{/css/components.css}">
</head>
<body>
  <div th:insert="~{fragments/navbar :: navbar}"></div>

  <div class="container mt-4" th:with="o=${order}">
    <a th:href="@{/admin/orders}" class="btn btn-link p-0 mb-3">← Back to Orders</a>
    <h1>Order #<span th:text="${o.id}">1</span></h1>
    <p class="text-muted mb-4">
      <span th:text="${#temporals.format(o.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-20</span>
      · Status: <span class="badge" th:classappend="${o.status.name()=='DELIVERED'?'bg-success':(o.status.name()=='CANCELLED'?'bg-danger':'bg-secondary')}">
        <span th:text="${o.status}">PENDING</span>
      </span>
    </p>

    <div class="row g-3">
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-header">Customer</div>
          <div class="card-body">
            <div><strong>Name:</strong> <span th:text="${o.user.firstName + ' ' + o.user.lastName}">John Doe</span></div>
            <div><strong>Email:</strong> <span th:text="${o.user.email}">john@example.com</span></div>
            <div th:if="${o.user.phoneNumber}"><strong>Phone:</strong> <span th:text="${o.user.phoneNumber}">1234567890</span></div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-header">Shipping Address</div>
          <div class="card-body">
            <div th:text="${o.shippingAddress.streetAddress}">123 Main St</div>
            <div>
              <span th:text="${o.shippingAddress.city}">City</span>,
              <span th:text="${o.shippingAddress.state}">State</span>
            </div>
            <div>
              <span th:text="${o.shippingAddress.country}">Country</span>
              <span th:text="${o.shippingAddress.zipCode}">00000</span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-header">Billing Address</div>
          <div class="card-body">
            <div th:text="${o.billingAddress.streetAddress}">123 Main St</div>
            <div>
              <span th:text="${o.billingAddress.city}">City</span>,
              <span th:text="${o.billingAddress.state}">State</span>
            </div>
            <div>
              <span th:text="${o.billingAddress.country}">Country</span>
              <span th:text="${o.billingAddress.zipCode}">00000</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-header">Items</div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table mb-0">
            <thead>
              <tr><th>Product</th><th class="text-end">Price</th><th class="text-end">Qty</th><th class="text-end">Subtotal</th></tr>
            </thead>
            <tbody>
              <tr th:each="item : ${o.orderItems}">
                <td th:text="${item.product.name}">Product Name</td>
                <td class="text-end" th:text="${'₹' + #numbers.formatDecimal(item.price,1,2)}">₹0.00</td>
                <td class="text-end" th:text="${item.quantity}">1</td>
                <td class="text-end" th:text="${'₹' + #numbers.formatDecimal(item.subtotal,1,2)}">₹0.00</td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th colspan="3" class="text-end">Total</th>
                <th class="text-end" th:text="${'₹' + #numbers.formatDecimal(o.totalAmount,1,2)}">₹0.00</th>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div th:insert="~{fragments/footer :: footer}"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
